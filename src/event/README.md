###事件服务器

1. 建筑升级
2. 招募
3. 研究
4. 技能冷却

等需要定时器的操作，事件触发后，会直接持久化升级等效果到数据库.

####关于一致性：   
事件服务器对数据库的操作是乐观锁(Compare-And-Set)， 保证，以用户在线时的操作结果为准。      
即： agent可以覆盖event服务器的结果， event服务器只对 *最新的记录* 做尝试性操作。

考虑如下几种情况：    
1. 用户执行一个升级操作，并离线   
2. 用户摆放建筑，并持久化到数据库，离线，随后一个CD事件在Event服务器被触发。    
3. 用户在一周后，上线。
