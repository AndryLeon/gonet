###GONET 总体设计

<pre>


                     Internet
                        ^
     +------------------|--------------------------------------------------+
                        |
             +-----+  +-+---+   +-----+
             |Agent|  |Agent|   |Agent|                    +-----------+
             +--+--+  +-----+   +--+--+                    | MONGODB   |
                |                  |                       |-----------|
     +----------|------------------|------------------+--&gt; | ESTATES   |
                |                  |                       | BASIC     |
          +-----v----+      +------v-----+                 | FORWARD   |
          |HUB Server|      |Event Server|                 | ....      |
          +----------+      +------------+                 +-----------+</pre>
          
###架构描述：

* Game Server(Agent):  
玩家直接连接GS， 处理玩家逻辑，逻辑结果直接存入数据库，升级交给Event服务器处理，玩家交互由HUB完成。     
（GS的操作均为同步操作。）
  
* Hub Server:  
若干个GS 连接到一个HUB, 理论上只存在一个HUB，维护基础的玩家全局的信息。以及 GS<--->GS 的交互.  
基本信息持久保持在内存中。   
    
* Event Server:  
事件服务器，完成例如建筑升级，招募，研究等需要升级等待、建筑位置移动等改变玩家数据的操作。    
玩家事件在触发后会读取数据库，计算变更后，写入。 （ES的操作均为异步操作。）


http://www.asciiflow.com/#1969513383122025049/1330728080
